<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Sci-Guru • Density Lab (Upgraded)</title>
  <link rel="icon" href="lec-logo.jpg"/>

  <style>
    :root{
      --bg1:#0b1220;--bg2:#081a3b;
      --stroke:rgba(255,255,255,.12);
      --text:#eaf2ff;--muted:rgba(234,242,255,.72);
      --blue:#2f7bff;--purple:#7c5cff;
      --good:#33d07a;--warn:#ffcc66;--bad:#ff5a6b;
      --card:rgba(255,255,255,.05);
    }
    *{box-sizing:border-box}
    body{
      margin:0;color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:
        radial-gradient(1200px 650px at 20% 10%, rgba(47,123,255,.34), transparent 60%),
        radial-gradient(900px 520px at 90% 30%, rgba(124,92,255,.22), transparent 55%),
        linear-gradient(135deg,var(--bg1),var(--bg2));
      min-height:100vh;
    }
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1150px;margin:0 auto;padding:14px 14px 36px}

    header{
      display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;
      padding:12px 14px;border:1px solid var(--stroke);
      background:rgba(0,0,0,.25);backdrop-filter:blur(10px);
      border-radius:16px;
    }
    .brand{display:flex;align-items:center;gap:10px}
    .logo{
      width:40px;height:40px;border-radius:12px;overflow:hidden;
      border:1px solid var(--stroke);background:rgba(255,255,255,.06);
      display:flex;align-items:center;justify-content:center;
      font-weight:900;
    }
    .logo img{width:100%;height:100%;object-fit:cover}
    .btn{
      border:1px solid var(--stroke);background:rgba(255,255,255,.06);
      padding:10px 12px;border-radius:12px;font-weight:900;font-size:13px;cursor:pointer
    }
    .btn:hover{background:rgba(255,255,255,.10)}
    .btn.primary{
      border-color:rgba(47,123,255,.55);
      background:linear-gradient(135deg, rgba(47,123,255,.95), rgba(124,92,255,.55));
      color:#071022
    }

    .hero{
      margin-top:12px;border:1px solid var(--stroke);background:var(--card);
      border-radius:18px;padding:14px
    }
    .hero h1{margin:0;font-size:18px}
    .hero p{margin:6px 0 0;color:var(--muted);font-size:13px;line-height:1.55}

    .grid{margin-top:12px;display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media(max-width:980px){.grid{grid-template-columns:1fr}}

    .card{
      border:1px solid var(--stroke);background:rgba(255,255,255,.05);
      border-radius:18px;padding:12px
    }
    .card h2{margin:0 0 8px;font-size:14px}
    .small{color:var(--muted);font-size:12px;line-height:1.5}

    select,input{
      width:100%;padding:10px;border-radius:12px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.20);color:var(--text);outline:none
    }
    .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-top:10px}
    .chip{
      border:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.18);border-radius:999px;
      padding:8px 10px;font-size:12px;color:rgba(234,242,255,.85)
    }
    .status{
      margin-top:10px;border:1px dashed rgba(255,255,255,.18);
      border-radius:16px;padding:10px;background:rgba(0,0,0,.12);
      font-size:12px;line-height:1.55
    }
    .ok{color:var(--good);font-weight:900}
    .warn{color:var(--warn);font-weight:900}
    .bad{color:var(--bad);font-weight:900}
    .divider{height:1px;background:rgba(255,255,255,.10);margin:10px 0}

    /* Tank / buoyancy visual */
    .tank{
      border:1px solid rgba(255,255,255,.14);
      border-radius:18px;
      background:rgba(0,0,0,.18);
      padding:12px;
    }
    .tankBox{
      position:relative;
      height:260px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.14);
      overflow:hidden;
      background:rgba(255,255,255,.04);
    }
    .water{
      position:absolute;left:0;right:0;bottom:0;
      height:60%;
      background:linear-gradient(180deg, rgba(47,123,255,.25), rgba(47,123,255,.18));
      border-top:1px solid rgba(255,255,255,.12);
    }
    .waterLabel{
      position:absolute;left:12px;top:12px;
      font-size:12px;color:rgba(234,242,255,.8);
      background:rgba(0,0,0,.25);
      border:1px solid rgba(255,255,255,.12);
      border-radius:999px;padding:6px 10px;
    }
    .obj{
      position:absolute;
      width:82px;height:82px;border-radius:18px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      display:flex;align-items:center;justify-content:center;
      text-align:center;font-weight:900;font-size:12px;
      left:50%;transform:translateX(-50%);
      transition:all .35s ease;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
    }
    .obj small{display:block;font-weight:700;color:rgba(234,242,255,.75);margin-top:4px}
    .floatRing{
      position:absolute;left:50%;transform:translateX(-50%);
      width:120px;height:12px;border-radius:999px;
      background:rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.14);
      top:40%;
      opacity:.0;
      transition:opacity .25s ease;
    }
    .floatRing.show{opacity:1}

    .barWrap{
      display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px
    }
    .bar{
      border:1px solid rgba(255,255,255,.14);
      border-radius:16px;background:rgba(0,0,0,.14);
      padding:10px
    }
    .meter{
      height:10px;border-radius:999px;background:rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.12);
      overflow:hidden;margin-top:8px
    }
    .fill{
      height:100%;
      width:0%;
      background:linear-gradient(90deg, rgba(47,123,255,.9), rgba(124,92,255,.55));
      transition:width .3s ease;
    }

    .tabs{margin-top:12px;display:flex;gap:10px;flex-wrap:wrap}
    .tab{
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.16);
      padding:10px 12px;border-radius:999px;font-weight:900;font-size:13px;cursor:pointer;
      color:rgba(234,242,255,.85);
    }
    .tab.active{
      border-color:rgba(47,123,255,.55);
      background:linear-gradient(135deg, rgba(47,123,255,.35), rgba(124,92,255,.22));
      color:var(--text);
    }
  </style>
</head>

<body>
<div class="wrap">
  <header>
    <div class="brand">
      <div class="logo">
        <img src="lec-logo.jpg" alt="logo"
             onerror="this.style.display='none';this.parentElement.textContent='SG';">
      </div>
      <div>
        <div style="font-weight:900">Topic • Density (Upgraded)</div>
        <div class="small">Density = mass ÷ volume • Float/Sink • Salt-water challenge</div>
      </div>
    </div>

    <div class="row">
      <a class="btn" href="labs-hub.html">Lab Hub</a>
      <a class="btn" href="tutor.html">Tutor</a>
      <button class="btn primary" onclick="resetLab()">Reset</button>
    </div>
  </header>

  <section class="hero">
    <h1>Density & Floating Lab (Zimbabwe examples)</h1>
    <p>
      Compare objects like <b>imbokodo (grinding stone)</b>, wood, plastic bucket and iron.
      Change the liquid (water vs salt water) and observe when objects float or sink.
    </p>
  </section>

  <div class="tabs">
    <button class="tab active" id="tabLab" onclick="showTab('lab')">Lab</button>
    <button class="tab" id="tabChallenge" onclick="showTab('challenge')">Challenge</button>
    <button class="tab" id="tabQuiz" onclick="showTab('quiz')">Quick Quiz</button>
  </div>

  <!-- ======================= LAB ======================= -->
  <div id="viewLab">
    <div class="grid">
      <div class="card">
        <h2>Choose object & liquid</h2>
        <div class="small">Density is shown in g/cm³ (same as g/mL). Water is ~1.00 g/cm³.</div>

        <div class="row">
          <div style="flex:1;min-width:240px">
            <div class="small"><b>Object</b></div>
            <select id="objSelect" onchange="applyObject()">
              <option value="stone" selected>Imbokodo (stone)</option>
              <option value="wood">Wood block</option>
              <option value="plastic">Plastic bucket piece</option>
              <option value="iron">Iron nail</option>
              <option value="oil">Cooking oil (in bottle)</option>
              <option value="egg">Egg</option>
            </select>
          </div>
          <div style="flex:1;min-width:240px">
            <div class="small"><b>Liquid</b></div>
            <select id="liqSelect" onchange="applyLiquid()">
              <option value="water" selected>Water (ρ = 1.00)</option>
              <option value="salt">Salt water (ρ = 1.10)</option>
              <option value="dense">Very salty (ρ = 1.20)</option>
              <option value="oil">Oil (ρ = 0.92)</option>
            </select>
          </div>
        </div>

        <div class="divider"></div>

        <h2>Measure mass & volume</h2>
        <div class="small">Change the sliders to see density change and the float/sink result.</div>

        <div class="row">
          <div style="flex:1;min-width:240px">
            <div class="small"><b>Mass (g)</b> <span class="chip"><b id="massVal">200</b> g</span></div>
            <input id="mass" type="range" min="10" max="800" value="200" oninput="updateCalc()"/>
          </div>
          <div style="flex:1;min-width:240px">
            <div class="small"><b>Volume (cm³)</b> <span class="chip"><b id="volVal">120</b> cm³</span></div>
            <input id="vol" type="range" min="10" max="600" value="120" oninput="updateCalc()"/>
          </div>
        </div>

        <div class="status" id="msg">
          Adjust mass/volume and observe the tank.
        </div>

        <div class="barWrap">
          <div class="bar">
            <div class="small"><b>Object density</b> <span class="chip">ρobj = <b id="rhoObj">1.67</b></span></div>
            <div class="meter"><div class="fill" id="objFill"></div></div>
            <div class="small" style="margin-top:8px">Higher density → more likely to sink.</div>
          </div>
          <div class="bar">
            <div class="small"><b>Liquid density</b> <span class="chip">ρliq = <b id="rhoLiq">1.00</b></span></div>
            <div class="meter"><div class="fill" id="liqFill"></div></div>
            <div class="small" style="margin-top:8px">If ρobj &lt; ρliq → float.</div>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>Tank simulation</h2>
        <div class="small">Object moves to float line or bottom depending on density comparison.</div>

        <div class="tank">
          <div class="tankBox" id="tankBox">
            <div class="waterLabel" id="waterLabel">Water (ρ = 1.00)</div>
            <div class="floatRing" id="floatRing"></div>
            <div class="water" id="water"></div>

            <div class="obj" id="obj">
              Imbokodo
              <small id="objTag">stone</small>
            </div>
          </div>

          <div class="panel" style="margin-top:10px;border:1px solid rgba(255,255,255,.14);border-radius:16px;background:rgba(0,0,0,.14);padding:12px">
            <div style="font-weight:900;font-size:13px">Readings</div>
            <div class="divider"></div>
            <div class="small" id="readout">
              • Density = mass ÷ volume<br>
              • ρobj = 1.67 g/cm³<br>
              • ρliq = 1.00 g/cm³<br>
              • Result: SINK
            </div>
          </div>

          <div class="small" style="margin-top:10px;color:rgba(234,242,255,.7)">
            Tip: Try <b>Egg</b> in <b>water</b> vs <b>salt water</b>. This is a real experiment.
          </div>
        </div>
      </div>

      <div class="card" style="grid-column:1/-1">
        <h2>Mini practical (what you would do in real lab)</h2>
        <div class="small">
          <b>Apparatus:</b> measuring cylinder, balance, water, object (stone/wood), thread.<br>
          <b>Steps:</b> (1) Measure mass on balance (g). (2) Put water in cylinder. (3) Record initial volume.
          (4) Add object and record final volume. (5) Volume of object = final - initial. (6) Density = mass ÷ volume.
        </div>
      </div>
    </div>
  </div>

  <!-- ======================= CHALLENGE ======================= -->
  <div id="viewChallenge" style="display:none">
    <div class="grid">
      <div class="card" style="grid-column:1/-1">
        <h2>Challenge tasks</h2>
        <div class="small">
          1) Set object to <b>Egg</b>, liquid to <b>Water</b>. Make it sink. Then switch liquid to <b>Salt water</b>. What happens?<br>
          2) Choose <b>Wood block</b> and adjust mass/volume until it just starts to sink in water. Note your density value.<br>
          3) Choose <b>Imbokodo</b>. Can it ever float in oil? Why/why not?
        </div>
        <div class="status">
          Rule: <span class="ok">ρobj &lt; ρliq → FLOAT</span> | <span class="bad">ρobj &gt; ρliq → SINK</span>
        </div>
      </div>
    </div>
  </div>

  <!-- ======================= QUIZ ======================= -->
  <div id="viewQuiz" style="display:none">
    <div class="grid">
      <div class="card" style="grid-column:1/-1">
        <h2>Quick Quiz (Density)</h2>
        <div class="small">Answer then press Mark.</div><br>

        <div class="grid" style="grid-template-columns:1fr 1fr;gap:12px">
          <div class="card" style="margin:0">
            <div class="small"><b>1)</b> Density formula is…</div>
            <select id="q1">
              <option value="">Choose…</option>
              <option value="ok">Density = Mass ÷ Volume</option>
              <option value="no">Density = Volume ÷ Mass</option>
            </select>
          </div>
          <div class="card" style="margin:0">
            <div class="small"><b>2)</b> An object floats if…</div>
            <select id="q2">
              <option value="">Choose…</option>
              <option value="ok">ρobj is less than ρliq</option>
              <option value="no">ρobj is greater than ρliq</option>
            </select>
          </div>
          <div class="card" style="margin:0">
            <div class="small"><b>3)</b> Water density is about…</div>
            <select id="q3">
              <option value="">Choose…</option>
              <option value="ok">1.00 g/cm³</option>
              <option value="no">10.0 g/cm³</option>
            </select>
          </div>
          <div class="card" style="margin:0">
            <div class="small"><b>4)</b> Adding salt to water makes water…</div>
            <select id="q4">
              <option value="">Choose…</option>
              <option value="ok">More dense</option>
              <option value="no">Less dense</option>
            </select>
          </div>
        </div>

        <div class="row">
          <button class="btn primary" onclick="markQuiz()">Mark</button>
          <span class="chip">Score: <b id="score">0</b>/4</span>
        </div>
        <div class="status" id="qMsg">Press Mark.</div>
      </div>
    </div>
  </div>

  <footer style="margin-top:14px;text-align:center;color:rgba(234,242,255,.62);font-size:12px">
    © 2025 LEC Biotec • Sci-Guru Virtual Labs
  </footer>
</div>

<script>
  // ---------- Tabs ----------
  function showTab(name){
    document.getElementById("viewLab").style.display = (name==="lab") ? "" : "none";
    document.getElementById("viewChallenge").style.display = (name==="challenge") ? "" : "none";
    document.getElementById("viewQuiz").style.display = (name==="quiz") ? "" : "none";

    document.getElementById("tabLab").classList.toggle("active", name==="lab");
    document.getElementById("tabChallenge").classList.toggle("active", name==="challenge");
    document.getElementById("tabQuiz").classList.toggle("active", name==="quiz");
  }

  // ---------- Presets (object defaults) ----------
  const presets = {
    stone:   {name:"Imbokodo", tag:"stone", mass:450, vol:180},
    wood:    {name:"Wood", tag:"wood", mass:120, vol:200},
    plastic: {name:"Plastic", tag:"plastic", mass:60,  vol:120},
    iron:    {name:"Iron", tag:"iron", mass:350, vol:45},
    oil:     {name:"Oil bottle", tag:"oil", mass:150, vol:180},
    egg:     {name:"Egg", tag:"egg", mass:60,  vol:55}
  };

  const liquids = {
    water:{label:"Water", rho:1.00, waterHeight:60},
    salt:{label:"Salt water", rho:1.10, waterHeight:62},
    dense:{label:"Very salty", rho:1.20, waterHeight:64},
    oil:{label:"Oil", rho:0.92, waterHeight:58}
  };

  function applyObject(){
    const key = document.getElementById("objSelect").value;
    const p = presets[key];
    document.getElementById("mass").value = p.mass;
    document.getElementById("vol").value = p.vol;
    document.getElementById("obj").innerHTML = `${p.name}<small id="objTag">${p.tag}</small>`;
    updateCalc();
  }

  function applyLiquid(){
    updateCalc();
  }

  function clamp(x,a,b){ return Math.max(a, Math.min(b, x)); }

  function updateCalc(){
    const m = Number(document.getElementById("mass").value);
    const v = Number(document.getElementById("vol").value);
    document.getElementById("massVal").textContent = m;
    document.getElementById("volVal").textContent = v;

    const rhoObj = m / v; // g/cm3
    const liqKey = document.getElementById("liqSelect").value;
    const liq = liquids[liqKey];
    const rhoLiq = liq.rho;

    document.getElementById("rhoObj").textContent = rhoObj.toFixed(2);
    document.getElementById("rhoLiq").textContent = rhoLiq.toFixed(2);

    // Bars (scale 0..3)
    const objPct = clamp((rhoObj/3)*100, 0, 100);
    const liqPct = clamp((rhoLiq/3)*100, 0, 100);
    document.getElementById("objFill").style.width = objPct.toFixed(0)+"%";
    document.getElementById("liqFill").style.width = liqPct.toFixed(0)+"%";

    // Water height
    const water = document.getElementById("water");
    water.style.height = (liq.waterHeight) + "%";
    document.getElementById("waterLabel").textContent = `${liq.label} (ρ = ${rhoLiq.toFixed(2)})`;

    // Float / sink logic
    const obj = document.getElementById("obj");
    const ring = document.getElementById("floatRing");

    let result = "";
    let msgHTML = "";

    if(rhoObj < rhoLiq){
      result = "FLOAT ✅";
      // place near float line (top of water)
      const topPos = 100 - liq.waterHeight; // water starts at this from top
      obj.style.top = (topPos + 22) + "%"; // slightly into water
      ring.style.top = (topPos + 40) + "%";
      ring.classList.add("show");
      msgHTML = `<span class="ok">FLOATING ✅</span> because ρobj (${rhoObj.toFixed(2)}) is less than ρliq (${rhoLiq.toFixed(2)}).`;
    } else if (Math.abs(rhoObj - rhoLiq) < 0.03){
      result = "NEUTRAL (just about) ⚖️";
      const topPos = 100 - liq.waterHeight;
      obj.style.top = (topPos + 55) + "%";
      ring.style.top = (topPos + 55) + "%";
      ring.classList.add("show");
      msgHTML = `<span class="warn">NEAR NEUTRAL ⚖️</span> ρobj is almost equal to ρliq, so it may hover.`;
    } else {
      result = "SINK ❌";
      obj.style.top = "72%";
      ring.classList.remove("show");
      msgHTML = `<span class="bad">SINKING ❌</span> because ρobj (${rhoObj.toFixed(2)}) is greater than ρliq (${rhoLiq.toFixed(2)}).`;
    }

    document.getElementById("msg").innerHTML = msgHTML;

    document.getElementById("readout").innerHTML =
      `• Density = mass ÷ volume<br>
       • ρobj = <b>${rhoObj.toFixed(2)}</b> g/cm³<br>
       • ρliq = <b>${rhoLiq.toFixed(2)}</b> g/cm³<br>
       • Result: <b>${result}</b>`;
  }

  function markQuiz(){
    const ids=["q1","q2","q3","q4"];
    let s=0;
    ids.forEach(id=>{ if(document.getElementById(id).value==="ok") s++; });
    document.getElementById("score").textContent=s;
    document.getElementById("qMsg").innerHTML = (s===4)
      ? `<span class="ok">Excellent ✅</span>`
      : `<span class="bad">Try again ❌</span> You got ${s}/4.`;
  }

  function resetLab(){
    document.getElementById("objSelect").value="stone";
    document.getElementById("liqSelect").value="water";
    applyObject();
  }

  // init
  applyObject();
  applyLiquid();
</script>
</body>
</html>
