<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Sci-Guru • Topic 19 Electricity (Series Circuits)</title>
  <link rel="icon" href="lec-logo.jpg"/>

  <style>
    :root{
      --bg1:#0b1220;--bg2:#081a3b;
      --stroke:rgba(255,255,255,.12);
      --text:#eaf2ff;--muted:rgba(234,242,255,.72);
      --blue:#2f7bff;--purple:#7c5cff;
      --good:#33d07a;--warn:#ffcc66;--bad:#ff5a6b;
      --card:rgba(255,255,255,.05);
    }
    *{box-sizing:border-box}
    body{
      margin:0;color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:
        radial-gradient(1200px 650px at 20% 10%, rgba(47,123,255,.34), transparent 60%),
        radial-gradient(900px 520px at 90% 30%, rgba(124,92,255,.22), transparent 55%),
        linear-gradient(135deg,var(--bg1),var(--bg2));
      min-height:100vh;
    }
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1150px;margin:0 auto;padding:14px 14px 36px}

    header{
      display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;
      padding:12px 14px;border:1px solid var(--stroke);
      background:rgba(0,0,0,.25);backdrop-filter:blur(10px);
      border-radius:16px;
    }
    .brand{display:flex;align-items:center;gap:10px}
    .logo{
      width:40px;height:40px;border-radius:12px;overflow:hidden;
      border:1px solid var(--stroke);background:rgba(255,255,255,.06);
      display:flex;align-items:center;justify-content:center;
      font-weight:900;
    }
    .logo img{width:100%;height:100%;object-fit:cover}
    .btn{
      border:1px solid var(--stroke);background:rgba(255,255,255,.06);
      padding:10px 12px;border-radius:12px;font-weight:900;font-size:13px;cursor:pointer
    }
    .btn:hover{background:rgba(255,255,255,.10)}
    .btn.primary{
      border-color:rgba(47,123,255,.55);
      background:linear-gradient(135deg, rgba(47,123,255,.95), rgba(124,92,255,.55));
      color:#071022
    }

    .hero{
      margin-top:12px;border:1px solid var(--stroke);background:var(--card);
      border-radius:18px;padding:14px
    }
    .hero h1{margin:0;font-size:18px}
    .hero p{margin:6px 0 0;color:var(--muted);font-size:13px;line-height:1.55}

    .tabs{margin-top:12px;display:flex;gap:10px;flex-wrap:wrap}
    .tab{
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.16);
      padding:10px 12px;border-radius:999px;font-weight:900;font-size:13px;cursor:pointer;
      color:rgba(234,242,255,.85);
    }
    .tab.active{
      border-color:rgba(47,123,255,.55);
      background:linear-gradient(135deg, rgba(47,123,255,.35), rgba(124,92,255,.22));
      color:var(--text);
    }

    .grid{margin-top:12px;display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media(max-width:980px){.grid{grid-template-columns:1fr}}

    .card{
      border:1px solid var(--stroke);background:rgba(255,255,255,.05);
      border-radius:18px;padding:12px
    }
    .card h2{margin:0 0 8px;font-size:14px}
    .small{color:var(--muted);font-size:12px;line-height:1.5}

    select,input{
      width:100%;padding:10px;border-radius:12px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.20);color:var(--text);outline:none
    }
    .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-top:10px}
    .chip{
      border:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.18);border-radius:999px;
      padding:8px 10px;font-size:12px;color:rgba(234,242,255,.85)
    }
    .status{
      margin-top:10px;border:1px dashed rgba(255,255,255,.18);
      border-radius:16px;padding:10px;background:rgba(0,0,0,.12);
      font-size:12px;line-height:1.55
    }
    .ok{color:var(--good);font-weight:900}
    .warn{color:var(--warn);font-weight:900}
    .bad{color:var(--bad);font-weight:900}

    /* Circuit visuals */
    .lab{
      display:grid;grid-template-columns:1fr;gap:10px
    }
    .panel{
      border:1px solid rgba(255,255,255,.14);
      border-radius:16px;background:rgba(0,0,0,.14);
      padding:12px
    }
    .circuit{
      border:1px solid rgba(255,255,255,.14);
      border-radius:16px;background:rgba(0,0,0,.18);
      padding:12px;position:relative;overflow:hidden;
      min-height:220px;
    }
    .wire{
      position:absolute;left:20px;right:20px;top:70px;height:8px;
      background:rgba(80,180,255,.22);border:1px solid rgba(255,255,255,.10);
      border-radius:10px;
    }
    .wire.bottom{top:auto;bottom:70px}
    .wire.left{
      width:8px;left:20px;top:70px;bottom:70px;height:auto;
    }
    .wire.right{
      width:8px;right:20px;top:70px;bottom:70px;height:auto;left:auto;height:auto;
    }

    .cellPack{
      position:absolute;left:40px;top:94px;
      display:flex;gap:8px;align-items:center;
      padding:10px 12px;border-radius:14px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      font-size:12px;font-weight:900;
    }
    .cell{
      width:18px;height:34px;border-radius:6px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,204,102,.18);
      position:relative;
    }
    .cell:before{
      content:"";position:absolute;right:-3px;top:6px;width:6px;height:8px;border-radius:3px;
      background:rgba(255,255,255,.35);
    }

    .switch{
      position:absolute;left:40px;bottom:95px;
      padding:10px 12px;border-radius:14px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      font-size:12px;font-weight:900;
      display:flex;gap:10px;align-items:center;
    }
    .toggle{
      width:46px;height:24px;border-radius:999px;border:1px solid rgba(255,255,255,.16);
      background:rgba(0,0,0,.18);position:relative;cursor:pointer;
    }
    .knob{
      width:18px;height:18px;border-radius:50%;
      background:rgba(255,255,255,.55);
      position:absolute;top:2px;left:3px;transition:all .2s ease;
    }
    .toggle.on{background:rgba(51,208,122,.18);border-color:rgba(51,208,122,.35)}
    .toggle.on .knob{left:24px;background:rgba(51,208,122,.85)}

    .ammeter,.voltmeter{
      position:absolute;right:40px;top:92px;
      padding:10px 12px;border-radius:14px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      font-size:12px;font-weight:900;
      min-width:160px;
    }
    .voltmeter{top:auto;bottom:92px}
    .meterVal{display:block;margin-top:6px;font-size:16px}
    .meterUnit{color:rgba(234,242,255,.7);font-size:11px}

    .bulbRow{
      position:absolute;left:180px;right:220px;top:98px;
      display:flex;gap:14px;justify-content:center;align-items:center;
    }
    .bulb{
      width:70px;height:70px;border-radius:18px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      font-weight:900;font-size:12px;gap:6px;
    }
    .glow{
      width:26px;height:26px;border-radius:50%;
      background:rgba(255,204,102,.12);
      border:1px solid rgba(255,204,102,.18);
      box-shadow:none;
      transition:all .25s ease;
    }
    .bulb small{font-weight:700;color:rgba(234,242,255,.75)}
    .note{
      margin-top:10px;color:rgba(234,242,255,.72);font-size:12px;line-height:1.5
    }
    .divider{height:1px;background:rgba(255,255,255,.10);margin:10px 0}
  </style>
</head>

<body>
<div class="wrap">
  <header>
    <div class="brand">
      <div class="logo">
        <img src="lec-logo.jpg" alt="logo"
             onerror="this.style.display='none';this.parentElement.textContent='SG';">
      </div>
      <div>
        <div style="font-weight:900">Topic 19 • Electricity</div>
        <div class="small">Circuits • switches • meters • <b>Series circuits (new)</b></div>
      </div>
    </div>

    <div class="row">
      <a class="btn" href="labs-hub.html">Lab Hub</a>
      <a class="btn" href="tutor.html">Tutor</a>
      <button class="btn primary" onclick="location.reload()">Refresh</button>
    </div>
  </header>

  <section class="hero">
    <h1>Electricity Virtual Lab</h1>
    <p>
      Use this lab to understand: <b>current</b> (flow of charge), <b>voltage</b> (push), and resistance.
      <br><b>Series circuit key rule:</b> the <b>same current</b> flows through every bulb in the series.
    </p>
  </section>

  <div class="tabs">
    <button class="tab active" id="tabSeries" onclick="showTab('series')">Series Circuits</button>
    <button class="tab" id="tabSymbols" onclick="showTab('symbols')">Symbols & Components</button>
    <button class="tab" id="tabQuiz" onclick="showTab('quiz')">Quick Quiz</button>
  </div>

  <!-- ======================= SERIES TAB ======================= -->
  <div id="viewSeries">
    <div class="grid">
      <div class="card">
        <h2>Build your series circuit</h2>
        <div class="small">Choose number of cells and bulbs, then toggle the switch ON.</div>

        <div class="row">
          <div style="flex:1;min-width:220px">
            <div class="small"><b>Cells (1.5V each)</b></div>
            <select id="cells" onchange="recalc()">
              <option value="1">1 cell</option>
              <option value="2" selected>2 cells</option>
              <option value="3">3 cells</option>
            </select>
          </div>
          <div style="flex:1;min-width:220px">
            <div class="small"><b>Bulbs in series</b></div>
            <select id="bulbs" onchange="recalc()">
              <option value="1">1 bulb</option>
              <option value="2" selected>2 bulbs</option>
              <option value="3">3 bulbs</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div style="flex:1;min-width:220px">
            <div class="small"><b>Bulb resistance</b></div>
            <select id="rb" onchange="recalc()">
              <option value="3">Low (3Ω) – brighter</option>
              <option value="6" selected>Normal (6Ω)</option>
              <option value="10">High (10Ω) – dimmer</option>
            </select>
          </div>
          <div style="flex:1;min-width:220px">
            <div class="small"><b>Wire resistance (small)</b></div>
            <select id="rw" onchange="recalc()">
              <option value="0.2" selected>0.2Ω</option>
              <option value="0.5">0.5Ω</option>
              <option value="1.0">1.0Ω</option>
            </select>
          </div>
        </div>

        <div class="status" id="seriesMsg">
          Turn the switch ON to see current, voltage, and brightness.
        </div>

        <div class="note">
          <b>What to observe:</b><br>
          • Add more bulbs in series → <b>total resistance increases</b> → current decreases → bulbs get dimmer.<br>
          • Add more cells → <b>voltage increases</b> → current increases → bulbs get brighter.<br>
          • In series, current is the same everywhere.
        </div>
      </div>

      <div class="card">
        <h2>Series circuit view</h2>
        <div class="small">Ammeter reads current (A). Voltmeter shows total voltage (V).</div>

        <div class="circuit" aria-label="Series circuit diagram">
          <div class="wire"></div>
          <div class="wire bottom"></div>
          <div class="wire left"></div>
          <div class="wire right"></div>

          <div class="cellPack" id="cellPack">
            <span>Cells</span>
            <div id="cellIcons" style="display:flex;gap:6px"></div>
            <span class="chip" style="margin-left:6px">V = <b id="vTotal">3.0</b><span class="meterUnit"> V</span></span>
          </div>

          <div class="switch">
            <span>Switch</span>
            <div class="toggle" id="sw" onclick="toggleSwitch()">
              <div class="knob"></div>
            </div>
            <span class="chip" id="swLabel">OFF</span>
          </div>

          <div class="ammeter">
            Ammeter
            <span class="meterVal"><span id="iTotal">0.00</span> <span class="meterUnit">A</span></span>
            <div class="small">Series current (same everywhere)</div>
          </div>

          <div class="voltmeter">
            Voltmeter
            <span class="meterVal"><span id="vMeter">0.0</span> <span class="meterUnit">V</span></span>
            <div class="small">Total voltage across cells</div>
          </div>

          <div class="bulbRow" id="bulbRow"></div>
        </div>

        <div class="panel" style="margin-top:10px">
          <div style="font-weight:900;font-size:13px">Readings</div>
          <div class="divider"></div>
          <div class="small" id="readout">
            • Total Resistance: —<br>
            • Current: —<br>
            • Voltage per bulb: —<br>
            • Power per bulb (brightness): —
          </div>
        </div>
      </div>

      <div class="card" style="grid-column:1/-1">
        <h2>Challenge Tasks</h2>
        <div class="small">
          1) Set <b>2 cells</b> and compare brightness for <b>1 bulb</b> vs <b>3 bulbs</b>.<br>
          2) Keep <b>2 bulbs</b> and compare <b>1 cell</b> vs <b>3 cells</b>.<br>
          3) Increase wire resistance: what happens to current?
        </div>
      </div>
    </div>
  </div>

  <!-- ======================= SYMBOLS TAB ======================= -->
  <div id="viewSymbols" style="display:none">
    <div class="grid">
      <div class="card">
        <h2>Common circuit components</h2>
        <div class="small">
          <b>Cell/Battery:</b> provides voltage (push).<br>
          <b>Wire:</b> connects components (conductors).<br>
          <b>Switch:</b> opens/closes circuit.<br>
          <b>Bulb:</b> converts electrical energy to light/heat.<br>
          <b>Ammeter:</b> measures current (connect in series).<br>
          <b>Voltmeter:</b> measures voltage (connect in parallel across component).<br>
        </div>
        <div class="status">
          Tip: If you want, next we can add a <b>parallel circuit</b> tab after series is working well.
        </div>
      </div>

      <div class="card">
        <h2>Safety reminder</h2>
        <div class="small">
          • Never short-circuit a real battery (wire directly across terminals).<br>
          • Use correct fuses and switches in real life.<br>
          • Keep water away from electrical devices.<br>
        </div>
      </div>
    </div>
  </div>

  <!-- ======================= QUIZ TAB ======================= -->
  <div id="viewQuiz" style="display:none">
    <div class="grid">
      <div class="card" style="grid-column:1/-1">
        <h2>Quick Quiz (Series Circuits)</h2>
        <div class="small">Answer then press Mark.</div><br>

        <div class="grid" style="grid-template-columns:1fr 1fr;gap:12px">
          <div class="card" style="margin:0">
            <div class="small"><b>1)</b> In a series circuit, current is…</div>
            <select id="q1">
              <option value="">Choose…</option>
              <option value="ok">The same through every bulb</option>
              <option value="no">Different in each bulb</option>
            </select>
          </div>
          <div class="card" style="margin:0">
            <div class="small"><b>2)</b> Adding more bulbs in series makes bulbs…</div>
            <select id="q2">
              <option value="">Choose…</option>
              <option value="ok">Dimmer</option>
              <option value="no">Brighter</option>
            </select>
          </div>
          <div class="card" style="margin:0">
            <div class="small"><b>3)</b> Ammeter is connected…</div>
            <select id="q3">
              <option value="">Choose…</option>
              <option value="ok">In series</option>
              <option value="no">In parallel only</option>
            </select>
          </div>
          <div class="card" style="margin:0">
            <div class="small"><b>4)</b> Voltmeter measures…</div>
            <select id="q4">
              <option value="">Choose…</option>
              <option value="ok">Voltage (V)</option>
              <option value="no">Current (A)</option>
            </select>
          </div>
        </div>

        <div class="row">
          <button class="btn primary" onclick="markQuiz()">Mark</button>
          <span class="chip">Score: <b id="qScore">0</b>/4</span>
        </div>
        <div class="status" id="qMsg">Press Mark.</div>
      </div>
    </div>
  </div>

  <footer style="margin-top:14px;text-align:center;color:rgba(234,242,255,.62);font-size:12px">
    © 2025 LEC Biotec • Sci-Guru Virtual Labs
  </footer>
</div>

<script>
  // ---------- Tabs ----------
  function showTab(name){
    document.getElementById("viewSeries").style.display = (name==="series") ? "" : "none";
    document.getElementById("viewSymbols").style.display = (name==="symbols") ? "" : "none";
    document.getElementById("viewQuiz").style.display = (name==="quiz") ? "" : "none";

    document.getElementById("tabSeries").classList.toggle("active", name==="series");
    document.getElementById("tabSymbols").classList.toggle("active", name==="symbols");
    document.getElementById("tabQuiz").classList.toggle("active", name==="quiz");
  }

  // ---------- Series Circuit Logic ----------
  let switchOn = false;

  function toggleSwitch(){
    switchOn = !switchOn;
    const sw = document.getElementById("sw");
    const lab = document.getElementById("swLabel");
    sw.classList.toggle("on", switchOn);
    lab.textContent = switchOn ? "ON" : "OFF";
    recalc();
  }

  function mkCells(){
    const n = Number(document.getElementById("cells").value);
    const cellIcons = document.getElementById("cellIcons");
    cellIcons.innerHTML = "";
    for(let i=0;i<n;i++){
      const d = document.createElement("div");
      d.className = "cell";
      cellIcons.appendChild(d);
    }
    const V = n * 1.5;
    document.getElementById("vTotal").textContent = V.toFixed(1);
    return V;
  }

  function mkBulbs(){
    const n = Number(document.getElementById("bulbs").value);
    const row = document.getElementById("bulbRow");
    row.innerHTML = "";
    for(let i=1;i<=n;i++){
      const b = document.createElement("div");
      b.className = "bulb";
      b.innerHTML = `
        <div class="glow" id="glow${i}"></div>
        Bulb ${i}
        <small><span id="vb${i}">0.0</span> V</small>
      `;
      row.appendChild(b);
    }
    return n;
  }

  function clamp(x, a, b){ return Math.max(a, Math.min(b, x)); }

  function setGlow(i, level){
    // level 0..1
    const g = document.getElementById("glow"+i);
    const alpha = 0.10 + level*0.45;
    const blur = 6 + level*22;
    const spread = 0 + level*10;

    g.style.background = `rgba(255,204,102,${alpha})`;
    g.style.borderColor = `rgba(255,204,102,${0.18 + level*0.40})`;
    g.style.boxShadow = `0 0 ${blur}px ${spread}px rgba(255,204,102,${0.25 + level*0.55})`;
  }

  function recalc(){
    const V = mkCells();
    const nBulbs = mkBulbs();
    const Rb = Number(document.getElementById("rb").value);   // per bulb
    const Rw = Number(document.getElementById("rw").value);   // total wire resistance (small)
    const msg = document.getElementById("seriesMsg");

    // total resistance in series:
    const Rtotal = (nBulbs * Rb) + Rw;

    // if switch OFF => no current
    let I = 0;
    if(switchOn){
      I = V / Rtotal;
      msg.innerHTML = `<span class="ok">Circuit closed ✅</span> Current is flowing.`;
    }else{
      msg.innerHTML = `Turn the switch ON to see current, voltage, and brightness.`;
    }

    // meter readings
    document.getElementById("iTotal").textContent = I.toFixed(2);
    document.getElementById("vMeter").textContent = (switchOn ? V.toFixed(1) : "0.0");

    // voltages per bulb (Vb = I*Rb)
    const Vb = I * Rb;

    // power per bulb (brightness proxy): P = I^2 * Rb
    const P = I*I*Rb;

    // Normalize brightness to look nice (visual only)
    // Reference: 3V, 1 bulb, 6Ω => I=0.5A, P=1.5W
    const Pref = 1.5;
    const level = clamp(P / Pref, 0, 1.6); // allow a bit above 1
    const visual = clamp(level/1.2, 0, 1);

    for(let i=1;i<=nBulbs;i++){
      const vSpan = document.getElementById("vb"+i);
      if(vSpan) vSpan.textContent = switchOn ? Vb.toFixed(1) : "0.0";
      setGlow(i, switchOn ? visual : 0);
    }

    // Readout panel
    const readout = document.getElementById("readout");
    if(!switchOn){
      readout.innerHTML =
        `• Total Resistance: <b>${Rtotal.toFixed(1)} Ω</b><br>
         • Current: <b>0.00 A</b><br>
         • Voltage per bulb: <b>0.0 V</b><br>
         • Power per bulb (brightness): <b>0.00 W</b>`;
      return;
    }

    readout.innerHTML =
      `• Total Resistance: <b>${Rtotal.toFixed(1)} Ω</b> (Rb × bulbs + wire)<br>
       • Current (same everywhere): <b>${I.toFixed(2)} A</b><br>
       • Voltage per bulb: <b>${Vb.toFixed(1)} V</b><br>
       • Power per bulb (brightness): <b>${P.toFixed(2)} W</b>`;

    // sanity: if Vb*nBulbs is close to V, good. wire drops small.
  }

  // ---------- Quiz ----------
  function markQuiz(){
    const ids=["q1","q2","q3","q4"];
    let s=0;
    ids.forEach(id=>{ if(document.getElementById(id).value==="ok") s++; });
    document.getElementById("qScore").textContent=s;
    document.getElementById("qMsg").innerHTML = (s===4)
      ? `<span class="ok">Excellent ✅</span>`
      : `<span class="bad">Try again ❌</span> You got ${s}/4.`;
  }

  // init
  recalc();
</script>
</body>
              </html>
