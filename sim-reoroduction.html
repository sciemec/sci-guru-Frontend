<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Sci-Guru • Topic 6: Reproductive Systems</title>
  <link rel="icon" href="lec-logo.jpg"/>
  <style>
    :root{--bg1:#0b1220;--bg2:#081a3b;--stroke:rgba(255,255,255,.12);--text:#eaf2ff;--muted:rgba(234,242,255,.72);--blue:#2f7bff;--purple:#7c5cff;--good:#33d07a;--bad:#ff5a6b}
    *{box-sizing:border-box}
    body{margin:0;color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:
      radial-gradient(1200px 650px at 20% 10%, rgba(47,123,255,.34), transparent 60%),
      radial-gradient(900px 520px at 90% 30%, rgba(124,92,255,.22), transparent 55%),
      linear-gradient(135deg,var(--bg1),var(--bg2));min-height:100vh}
    .wrap{max-width:1200px;margin:0 auto;padding:14px 14px 36px}
    header{position:sticky;top:10px;z-index:10;display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;padding:12px 14px;border:1px solid var(--stroke);background:rgba(0,0,0,.25);backdrop-filter:blur(10px);border-radius:16px}
    .brand{display:flex;align-items:center;gap:10px;min-width:0}
    .logo{width:44px;height:44px;border-radius:12px;overflow:hidden;border:1px solid var(--stroke);background:rgba(255,255,255,.06);display:flex;align-items:center;justify-content:center}
    .logo img{width:100%;height:100%;object-fit:cover}
    .t b{display:block;font-size:16px}.t span{display:block;font-size:12px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    nav{display:flex;gap:8px;flex-wrap:wrap}
    .btn{border:1px solid var(--stroke);background:rgba(255,255,255,.06);color:var(--text);padding:10px 12px;border-radius:12px;text-decoration:none;font-weight:900;font-size:13px;cursor:pointer}
    .btn.primary{border-color:rgba(47,123,255,.55);background:linear-gradient(135deg, rgba(47,123,255,.95), rgba(124,92,255,.55));color:#071022}
    .hero{margin-top:12px;border:1px solid var(--stroke);background:rgba(255,255,255,.05);border-radius:18px;padding:14px;display:flex;gap:12px;flex-wrap:wrap;justify-content:space-between;align-items:center}
    .hero h1{margin:0;font-size:18px}.hero p{margin:6px 0 0;color:var(--muted);font-size:13px;line-height:1.5;max-width:900px}
    .pill{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--stroke);background:rgba(255,255,255,.06);padding:8px 10px;border-radius:999px;font-size:12px;color:var(--muted)}
    .dot{width:9px;height:9px;border-radius:99px;background:var(--good);box-shadow:0 0 0 4px rgba(51,208,122,.14)}
    .grid{margin-top:12px;display:grid;grid-template-columns:1.15fr .85fr;gap:12px;align-items:start}
    @media(max-width:980px){.grid{grid-template-columns:1fr}}
    .panel{border:1px solid var(--stroke);background:rgba(255,255,255,.05);border-radius:18px;overflow:hidden}
    .panelHead{padding:14px;border-bottom:1px solid var(--stroke);display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;background:rgba(0,0,0,.18)}
    .panelHead h2{margin:0;font-size:14px}.panelHead small{color:var(--muted)}
    .panelBody{padding:12px}
    .tabs{display:flex;gap:8px;flex-wrap:wrap}
    .tab{padding:10px 12px;border-radius:999px;border:1px solid var(--stroke);background:rgba(255,255,255,.06);color:var(--muted);font-weight:900;font-size:12px;cursor:pointer}
    .tab.active{color:#071022;border-color:rgba(47,123,255,.55);background:linear-gradient(135deg, rgba(47,123,255,.95), rgba(124,92,255,.55))}
    .two{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media(max-width:740px){.two{grid-template-columns:1fr}}
    .card{border:1px solid var(--stroke);background:rgba(255,255,255,.05);border-radius:16px;padding:12px}
    .card h3{margin:0 0 8px;font-size:13px}.card p{margin:0;color:var(--muted);font-size:12px;line-height:1.5}
    .controls{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .miniBtn{border:1px solid var(--stroke);background:rgba(255,255,255,.06);color:var(--text);padding:9px 10px;border-radius:12px;font-weight:900;font-size:12px;cursor:pointer}
    .miniBtn.primary{border-color:rgba(47,123,255,.55);background:linear-gradient(135deg, rgba(47,123,255,.95), rgba(124,92,255,.55));color:#071022}
    .feedback{margin-top:10px;border:1px solid var(--stroke);background:rgba(0,0,0,.18);border-radius:16px;padding:12px;min-height:80px;white-space:pre-wrap}
    select{width:100%;max-width:360px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);color:var(--text);border-radius:14px;padding:12px;outline:none;font-size:14px}
    .quizList{display:grid;gap:10px;margin-top:10px}
    .qItem{border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.05);border-radius:14px;padding:10px;display:flex;justify-content:space-between;gap:10px;align-items:center}
    .qItem b{display:block;font-size:13px}.qItem small{display:block;margin-top:4px;color:var(--muted);font-size:12px;line-height:1.4}
    .step{border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.05);border-radius:14px;padding:10px;margin-top:10px}
    footer{margin-top:16px;text-align:center;color:rgba(234,242,255,.62);font-size:12px}
  </style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="brand">
      <div class="logo"><img src="lec-logo.jpg" alt="Logo" onerror="this.style.display='none';this.parentElement.textContent='SG';"></div>
      <div class="t">
        <b>Topic 6 • Reproductive Systems (Virtual Lab)</b>
        <span>Flower parts • Pollination & fertilisation • Puberty</span>
      </div>
    </div>
    <nav>
      <a class="btn" href="tutor.html">← Back to Tutor</a>
      <a class="btn" href="labs-hub.html">Labs Hub</a>
      <a class="btn primary" href="sim-reproduction.html">Refresh</a>
    </nav>
  </header>

  <section class="hero">
    <div>
      <h1>Plant & Human Reproduction</h1>
      <p>Do 3 activities: <b>Flower parts matching</b>, <b>Pollination → Fertilisation stepper</b>, and <b>Puberty changes</b> + quiz.</p>
    </div>
    <div class="pill"><span class="dot"></span> Auto-save enabled</div>
  </section>

  <div class="grid">
    <section class="panel">
      <div class="panelHead">
        <div><h2>Activities</h2><small>Use tabs to switch</small></div>
        <div class="tabs" id="tabs"></div>
      </div>
      <div class="panelBody">

        <div class="view" id="view-flower">
          <div class="two">
            <div class="card">
              <h3>Flower Structure</h3>
              <p>Male part: <b>stamen</b> (anther + filament). Female part: <b>carpel</b> (stigma + style + ovary + ovule).</p>
            </div>
            <div class="card">
              <h3>Task</h3>
              <p>Match each part to its group (male/female/other).</p>
            </div>
          </div>

          <div class="quizList" id="flowerMatch"></div>

          <div class="controls">
            <button class="miniBtn primary" id="flowerCheck">Check</button>
            <button class="miniBtn" id="flowerReset">Reset</button>
          </div>

          <div class="feedback" id="flowerFeedback">Select answers then press Check.</div>
        </div>

        <div class="view" id="view-process" style="display:none">
          <div class="two">
            <div class="card">
              <h3>Pollination</h3>
              <p>Transfer of pollen from anther to stigma.</p>
            </div>
            <div class="card">
              <h3>Fertilisation</h3>
              <p>Fusion of male and female sex cells inside the ovule → forms a zygote.</p>
            </div>
          </div>

          <div class="step" id="procStep"></div>

          <div class="controls">
            <button class="miniBtn primary" id="prevStep">◀ Previous</button>
            <button class="miniBtn primary" id="nextStep">Next ▶</button>
            <button class="miniBtn" id="resetSteps">Reset</button>
          </div>

          <div class="feedback" id="procFeedback">Use Next to follow the process.</div>
        </div>

        <div class="view" id="view-puberty" style="display:none">
          <div class="two">
            <div class="card">
              <h3>Puberty (Boys)</h3>
              <p>Choose the changes that happen during puberty.</p>
            </div>
            <div class="card">
              <h3>Puberty (Girls)</h3>
              <p>Choose the changes that happen during puberty.</p>
            </div>
          </div>

          <div class="two" style="margin-top:10px">
            <div class="card" id="boysList"></div>
            <div class="card" id="girlsList"></div>
          </div>

          <div class="controls">
            <button class="miniBtn primary" id="pubCheck">Check</button>
            <button class="miniBtn" id="pubReset">Reset</button>
          </div>

          <div class="feedback" id="pubFeedback">Tick correct changes then press Check.</div>
        </div>

        <div class="view" id="view-quiz" style="display:none">
          <div class="card">
            <h3>Topic 6 Quiz</h3>
            <p>Answer all then click <b>Mark Quiz</b>.</p>
          </div>

          <div class="quizList" id="quizList"></div>

          <div class="controls">
            <button class="miniBtn primary" id="markQuiz">Mark Quiz</button>
            <button class="miniBtn" id="resetQuiz">Reset</button>
          </div>

          <div class="feedback" id="quizFeedback">Start answering the quiz.</div>
        </div>

      </div>
    </section>

    <aside class="panel">
      <div class="panelHead"><div><h2>Progress</h2><small>Saved in your browser</small></div></div>
      <div class="panelBody">
        <div class="card">
          <h3>Total Score</h3>
          <p style="font-size:28px;font-weight:900;margin:6px 0 0" id="score">0</p>
          <p class="pill" id="badge" style="margin-top:8px;">Badge: Starter</p>
        </div>
        <div style="height:10px"></div>
        <div class="card">
          <h3>Key facts</h3>
          <p>
            • Pollination: pollen anther → stigma<br/>
            • Fertilisation: gametes fuse inside ovule → zygote<br/>
            • Ovule becomes seed; ovary becomes fruit
          </p>
        </div>
      </div>
    </aside>
  </div>

  <footer>© 2025 LEC Biotec • sales@lecbiotec.com • Harare, Zimbabwe</footer>
</div>

<script>
  const KEY="sciguru_topic6_reproduction_v1";
  const state = load() || {score:0,_awards:{},tab:"flower",flower:{},step:0,pub:{boys:{},girls:{}},quiz:{}};
  function load(){try{return JSON.parse(localStorage.getItem(KEY))}catch(e){return null}}
  function save(){localStorage.setItem(KEY, JSON.stringify(state)); renderScore();}

  // tabs
  const TABS=[{id:"flower",label:"1) Flower parts"},{id:"process",label:"2) Process"},{id:"puberty",label:"3) Puberty"},{id:"quiz",label:"4) Quiz"}];
  let active=state.tab||"flower";
  const tabsEl=document.getElementById("tabs");
  function renderTabs(){
    tabsEl.innerHTML="";
    TABS.forEach(t=>{
      const b=document.createElement("button");
      b.className="tab"+(t.id===active?" active":"");
      b.type="button"; b.textContent=t.label;
      b.onclick=()=>{active=t.id; state.tab=active; showView(); renderTabs(); save();};
      tabsEl.appendChild(b);
    });
  }
  function showView(){
    document.getElementById("view-flower").style.display=active==="flower"?"":"none";
    document.getElementById("view-process").style.display=active==="process"?"":"none";
    document.getElementById("view-puberty").style.display=active==="puberty"?"":"none";
    document.getElementById("view-quiz").style.display=active==="quiz"?"":"none";
  }

  // score
  function addScore(points,key){
    state._awards=state._awards||{};
    if(state._awards[key]) return;
    state._awards[key]=true;
    state.score += points;
  }
  function badgeFromScore(s){ if(s>=80) return "Reproduction Pro"; if(s>=55) return "Explorer"; if(s>=30) return "Improving"; return "Starter"; }
  function renderScore(){
    document.getElementById("score").textContent=state.score||0;
    document.getElementById("badge").textContent="Badge: "+badgeFromScore(state.score||0);
  }

  // Activity 1: Flower parts match
  const parts=[
    {id:"anther", name:"Anther", correct:"Male (stamen)"},
    {id:"filament", name:"Filament", correct:"Male (stamen)"},
    {id:"stigma", name:"Stigma", correct:"Female (carpel)"},
    {id:"style", name:"Style", correct:"Female (carpel)"},
    {id:"ovary", name:"Ovary", correct:"Female (carpel)"},
    {id:"ovule", name:"Ovule", correct:"Female (carpel)"},
    {id:"petal", name:"Petal", correct:"Other"},
    {id:"sepal", name:"Sepal", correct:"Other"}
  ];
  const opts=["Male (stamen)","Female (carpel)","Other"];
  const flowerMatch=document.getElementById("flowerMatch");
  const flowerFeedback=document.getElementById("flowerFeedback");

  function renderFlower(){
    flowerMatch.innerHTML="";
    parts.forEach((p,i)=>{
      const val=state.flower[p.id];
      const row=document.createElement("div");
      row.className="qItem";
      row.innerHTML=`
        <div style="min-width:0">
          <b>${i+1}. ${p.name}</b>
          <small>Choose group</small>
        </div>
        <div>
          <select data-f="${p.id}">
            <option value="" ${val==null?"selected":""}>-- choose --</option>
            ${opts.map(o=>`<option value="${o}" ${val===o?"selected":""}>${o}</option>`).join("")}
          </select>
        </div>
      `;
      flowerMatch.appendChild(row);
    });
    flowerMatch.querySelectorAll("select[data-f]").forEach(s=>{
      s.onchange=()=>{state.flower[s.dataset.f]=s.value||null; save();};
    });
  }
  renderFlower();

  document.getElementById("flowerCheck").onclick=()=>{
    let answered=0, correct=0;
    parts.forEach(p=>{
      const a=state.flower[p.id]; if(!a) return;
      answered++; if(a===p.correct) correct++;
    });
    if(answered < parts.length){
      flowerFeedback.textContent=`Answered ${answered}/${parts.length}. Finish all to score.`;
      return;
    }
    const pts=Math.round((correct/parts.length)*25);
    addScore(pts,"flowerDone");
    flowerFeedback.textContent=`✅ Flower match: ${correct}/${parts.length}\nPoints added: ${pts}/25`;
    save();
  };
  document.getElementById("flowerReset").onclick=()=>{
    state.flower={}; flowerFeedback.textContent="Reset complete."; renderFlower(); save();
  };

  // Activity 2: Process stepper
  const steps=[
    "1) Pollen forms in the anther (stamen).",
    "2) Pollination: pollen is transferred from anther → stigma.",
    "3) Pollen tube grows down the style toward the ovary.",
    "4) Male nucleus travels down pollen tube to the ovule.",
    "5) Fertilisation: male and female sex cells fuse → zygote.",
    "6) Ovule becomes a seed; ovary becomes a fruit."
  ];
  const procStep=document.getElementById("procStep");
  const procFeedback=document.getElementById("procFeedback");
  function renderStep(){
    procStep.innerHTML = `<b>${steps[state.step] || steps[0]}</b>`;
  }
  document.getElementById("nextStep").onclick=()=>{
    state.step=Math.min(steps.length-1,(state.step||0)+1);
    renderStep();
    if(state.step===steps.length-1){ addScore(15,"processDone"); procFeedback.textContent="✅ Process complete. Ovule→seed, Ovary→fruit."; }
    else procFeedback.textContent="Continue with Next.";
    save();
  };
  document.getElementById("prevStep").onclick=()=>{
    state.step=Math.max(0,(state.step||0)-1);
    renderStep(); procFeedback.textContent="Moved back one step."; save();
  };
  document.getElementById("resetSteps").onclick=()=>{
    state.step=0; renderStep(); procFeedback.textContent="Reset complete. Start again."; save();
  };

  // Activity 3: Puberty checklists
  const boysCorrect=[
    "Voice deepens","Facial hair grows","Shoulders broaden","Growth spurt","Testes produce sperm"
  ];
  const girlsCorrect=[
    "Breasts develop","Menstruation begins","Hips widen","Growth spurt","Ovaries release eggs"
  ];
  const distract=["Teeth fall out","Gills develop","Tail grows","Becomes a plant"];
  const boysAll=[...boysCorrect, ...distract].sort(()=>Math.random()-0.5);
  const girlsAll=[...girlsCorrect, ...distract].sort(()=>Math.random()-0.5);

  const boysList=document.getElementById("boysList");
  const girlsList=document.getElementById("girlsList");
  const pubFeedback=document.getElementById("pubFeedback");

  function renderPub(){
    boysList.innerHTML="<h3>Tick for Boys</h3>"+boysAll.map(x=>{
      const checked=!!state.pub.boys[x];
      return `<label style="display:block;margin:8px 0;color:rgba(234,242,255,.8);font-size:12px;cursor:pointer">
        <input type="checkbox" data-boy="${x}" ${checked?"checked":""}/> ${x}
      </label>`;
    }).join("");
    girlsList.innerHTML="<h3>Tick for Girls</h3>"+girlsAll.map(x=>{
      const checked=!!state.pub.girls[x];
      return `<label style="display:block;margin:8px 0;color:rgba(234,242,255,.8);font-size:12px;cursor:pointer">
        <input type="checkbox" data-girl="${x}" ${checked?"checked":""}/> ${x}
      </label>`;
    }).join("");

    boysList.querySelectorAll("input[data-boy]").forEach(i=>i.onchange=()=>{state.pub.boys[i.dataset.boy]=i.checked; save();});
    girlsList.querySelectorAll("input[data-girl]").forEach(i=>i.onchange=()=>{state.pub.girls[i.dataset.girl]=i.checked; save();});
  }
  renderPub();

  document.getElementById("pubCheck").onclick=()=>{
    function scoreGroup(sel, correctArr){
      const picked = Object.keys(sel).filter(k=>sel[k]);
      const correctPicked = picked.filter(x=>correctArr.includes(x)).length;
      const wrongPicked = picked.filter(x=>!correctArr.includes(x)).length;
      return {correctPicked, wrongPicked, totalCorrect: correctArr.length};
    }
    const b=scoreGroup(state.pub.boys,boysCorrect);
    const g=scoreGroup(state.pub.girls,girlsCorrect);
    const raw = (b.correctPicked + g.correctPicked) - (b.wrongPicked + g.wrongPicked);
    const pts = Math.max(0, Math.min(20, raw*2));
    addScore(pts,"pubertyDone");
    pubFeedback.textContent =
      `Boys correct: ${b.correctPicked}/${b.totalCorrect} (wrong picked: ${b.wrongPicked})\n`+
      `Girls correct: ${g.correctPicked}/${g.totalCorrect} (wrong picked: ${g.wrongPicked})\n`+
      `Points added: ${pts}/20`;
    save();
  };
  document.getElementById("pubReset").onclick=()=>{
    state.pub={boys:{},girls:{}}; pubFeedback.textContent="Reset complete."; renderPub(); save();
  };

  // Quiz
  const QUIZ=[
    {id:"q1", q:"Pollination is transfer of pollen from ____ to ____.", opts:["stigma→anther","anther→stigma","ovary→petal"], correct:1, exp:"Pollination: anther to stigma."},
    {id:"q2", q:"Fertilisation happens inside the ____.", opts:["ovule","petal","sepal"], correct:0, exp:"Fertilisation happens inside the ovule."},
    {id:"q3", q:"The ovule becomes the ____.", opts:["seed","leaf","stamen"], correct:0, exp:"Ovule becomes seed."},
    {id:"q4", q:"The ovary becomes the ____.", opts:["fruit","root","pollen"], correct:0, exp:"Ovary becomes fruit."},
    {id:"q5", q:"Puberty is when the body prepares for ____.", opts:["reproduction","hibernation","photosynthesis"], correct:0, exp:"Puberty prepares the body for reproduction."}
  ];
  const quizList=document.getElementById("quizList");
  const quizFeedback=document.getElementById("quizFeedback");

  function renderQuiz(){
    quizList.innerHTML="";
    QUIZ.forEach((x,i)=>{
      const val=state.quiz[x.id];
      const row=document.createElement("div");
      row.className="qItem";
      row.innerHTML=`
        <div style="min-width:0"><b>${i+1}. ${x.q}</b><small>Select one answer</small></div>
        <div>
          <select data-q="${x.id}">
            <option value="" ${val==null?"selected":""}>-- choose --</option>
            ${x.opts.map((o,idx)=>`<option value="${idx}" ${String(val)===String(idx)?"selected":""}>${o}</option>`).join("")}
          </select>
        </div>
      `;
      quizList.appendChild(row);
    });
    quizList.querySelectorAll("select[data-q]").forEach(s=>{
      s.onchange=()=>{state.quiz[s.dataset.q]=s.value===""?null:Number(s.value); save();};
    });
  }
  renderQuiz();

  document.getElementById("markQuiz").onclick=()=>{
    let answered=0, correct=0;
    QUIZ.forEach(x=>{
      const a=state.quiz[x.id]; if(a==null) return;
      answered++; if(a===x.correct) correct++;
    });
    if(answered < QUIZ.length){ quizFeedback.textContent=`Answered ${answered}/${QUIZ.length}. Finish all then mark.`; return; }
    const pts=Math.round((correct/QUIZ.length)*30);
    addScore(pts,"topic6Quiz");
    let msg=`Quiz Results:\nCorrect: ${correct}/${QUIZ.length}\nPoints added: ${pts}/30\n\n`;
    QUIZ.forEach((x,i)=>{ const ok=state.quiz[x.id]===x.correct; msg+=`${i+1}) ${ok?"✅":"❌"} ${x.exp}\n`; });
    quizFeedback.textContent=msg;
    save();
  };
  document.getElementById("resetQuiz").onclick=()=>{state.quiz={}; quizFeedback.textContent="Quiz reset."; renderQuiz(); save();};

  function init(){ renderTabs(); showView(); renderScore(); renderStep(); save(); }
  init();
</script>
</body>
</html>