<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Sci-Guru • Topic 8: Separation</title>
  <link rel="icon" href="lec-logo.jpg"/>
  <style>
    :root{
      --bg1:#0b1220; --bg2:#081a3b;
      --stroke:rgba(255,255,255,.12);
      --text:#eaf2ff;
      --muted:rgba(234,242,255,.72);
      --blue:#2f7bff;
      --purple:#7c5cff;
      --good:#33d07a;
      --warn:#ffcc66;
      --bad:#ff5a6b;
      --card:rgba(255,255,255,.06);
    }
    *{box-sizing:border-box}
    body{
      margin:0;color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:
        radial-gradient(1200px 650px at 20% 10%, rgba(47,123,255,.34), transparent 60%),
        radial-gradient(900px 520px at 90% 30%, rgba(124,92,255,.22), transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      min-height:100vh;
    }
    .wrap{max-width:1200px;margin:0 auto;padding:14px 14px 36px}
    header{
      position:sticky;top:10px;z-index:10;
      display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;
      padding:12px 14px;border:1px solid var(--stroke);
      background:rgba(0,0,0,.25);backdrop-filter:blur(10px);
      border-radius:16px;
    }
    .brand{display:flex;align-items:center;gap:10px;min-width:0}
    .logo{width:44px;height:44px;border-radius:12px;overflow:hidden;border:1px solid var(--stroke);background:rgba(255,255,255,.06);display:flex;align-items:center;justify-content:center}
    .logo img{width:100%;height:100%;object-fit:cover}
    .t b{display:block;font-size:16px}
    .t span{display:block;font-size:12px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    nav{display:flex;gap:8px;flex-wrap:wrap}
    .btn{
      border:1px solid var(--stroke);background:rgba(255,255,255,.06);
      color:var(--text);padding:10px 12px;border-radius:12px;text-decoration:none;
      font-weight:900;font-size:13px;cursor:pointer;
      display:inline-flex;align-items:center;gap:8px;
    }
    .btn.primary{border-color:rgba(47,123,255,.55);background:linear-gradient(135deg, rgba(47,123,255,.95), rgba(124,92,255,.55));color:#071022}
    .hero{
      margin-top:12px;border:1px solid var(--stroke);background:rgba(255,255,255,.05);
      border-radius:18px;padding:14px;display:flex;gap:12px;flex-wrap:wrap;justify-content:space-between;align-items:center;
    }
    .hero h1{margin:0;font-size:18px}
    .hero p{margin:6px 0 0;color:var(--muted);font-size:13px;line-height:1.5;max-width:900px}
    .pill{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--stroke);background:rgba(255,255,255,.06);padding:8px 10px;border-radius:999px;font-size:12px;color:var(--muted)}
    .dot{width:9px;height:9px;border-radius:99px;background:var(--good);box-shadow:0 0 0 4px rgba(51,208,122,.14)}
    .grid{margin-top:12px;display:grid;grid-template-columns:1.15fr .85fr;gap:12px;align-items:start}
    @media(max-width:980px){.grid{grid-template-columns:1fr}}
    .panel{border:1px solid var(--stroke);background:rgba(255,255,255,.05);border-radius:18px;overflow:hidden}
    .panelHead{padding:14px;border-bottom:1px solid var(--stroke);display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;background:rgba(0,0,0,.18)}
    .panelHead h2{margin:0;font-size:14px}
    .panelHead small{color:var(--muted)}
    .panelBody{padding:12px}
    .tabs{display:flex;gap:8px;flex-wrap:wrap}
    .tab{padding:10px 12px;border-radius:999px;border:1px solid var(--stroke);background:rgba(255,255,255,.06);color:var(--muted);font-weight:900;font-size:12px;cursor:pointer}
    .tab.active{color:#071022;border-color:rgba(47,123,255,.55);background:linear-gradient(135deg, rgba(47,123,255,.95), rgba(124,92,255,.55))}
    .two{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media(max-width:740px){.two{grid-template-columns:1fr}}
    .card{border:1px solid var(--stroke);background:rgba(255,255,255,.05);border-radius:16px;padding:12px}
    .card h3{margin:0 0 8px;font-size:13px}
    .card p{margin:0;color:var(--muted);font-size:12px;line-height:1.5}
    .controls{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .miniBtn{border:1px solid var(--stroke);background:rgba(255,255,255,.06);color:var(--text);padding:9px 10px;border-radius:12px;font-weight:900;font-size:12px;cursor:pointer}
    .miniBtn.primary{border-color:rgba(47,123,255,.55);background:linear-gradient(135deg, rgba(47,123,255,.95), rgba(124,92,255,.55));color:#071022}
    .feedback{margin-top:10px;border:1px solid var(--stroke);background:rgba(0,0,0,.18);border-radius:16px;padding:12px;min-height:80px;white-space:pre-wrap}
    select{width:100%;max-width:380px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);color:var(--text);border-radius:14px;padding:12px;outline:none;font-size:14px}
    .quizList{display:grid;gap:10px;margin-top:10px}
    .qItem{border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.05);border-radius:14px;padding:10px;display:flex;justify-content:space-between;gap:10px;align-items:center}
    .qItem b{display:block;font-size:13px}
    .qItem small{display:block;margin-top:4px;color:var(--muted);font-size:12px;line-height:1.4}
    footer{margin-top:16px;text-align:center;color:rgba(234,242,255,.62);font-size:12px}
  </style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="brand">
      <div class="logo"><img src="lec-logo.jpg" alt="Logo" onerror="this.style.display='none';this.parentElement.textContent='SG';"></div>
      <div class="t">
        <b>Topic 8 • Separation (Virtual Lab)</b>
        <span>Filtration • Magnetism • Decanting • Evaporation • Winnowing</span>
      </div>
    </div>
    <nav>
      <a class="btn" href="tutor.html">← Back to Tutor</a>
      <a class="btn" href="labs-hub.html">Labs Hub</a>
      <a class="btn primary" href="sim-separation.html">Refresh</a>
    </nav>
  </header>

  <section class="hero">
    <div>
      <h1>Separate Mixtures the Correct Way</h1>
      <p>Choose a mixture and select the best separation method. Then do the Topic 8 quiz.</p>
    </div>
    <div class="pill"><span class="dot"></span> Auto-save enabled</div>
  </section>

  <div class="grid">
    <section class="panel">
      <div class="panelHead">
        <div><h2>Activities</h2><small>Use tabs to switch</small></div>
        <div class="tabs" id="tabs"></div>
      </div>
      <div class="panelBody">

        <div class="view" id="view-sim">
          <div class="two">
            <div class="card">
              <h3>Pick a mixture</h3>
              <select id="mixSel">
                <option value="sandWater">Sand + water</option>
                <option value="ironSulfur">Iron filings + sulfur</option>
                <option value="oilWater">Oil + water</option>
                <option value="saltWater">Salt + water</option>
                <option value="grainChaff">Grain + chaff</option>
              </select>
              <p style="margin-top:8px;color:var(--muted);font-size:12px">Then choose the best separation method.</p>
            </div>

            <div class="card">
              <h3>Choose method</h3>
              <select id="methodSel">
                <option value="filtration">Filtration</option>
                <option value="magnetism">Magnetism</option>
                <option value="decanting">Decanting</option>
                <option value="evaporation">Evaporation</option>
                <option value="winnowing">Winnowing</option>
              </select>
              <div class="controls">
                <button class="miniBtn primary" id="runBtn">Run</button>
                <button class="miniBtn" id="resetBtn">Reset</button>
              </div>
            </div>
          </div>

          <div class="feedback" id="simFeedback">Select a mixture and a method, then press Run.</div>
        </div>

        <div class="view" id="view-quiz" style="display:none">
          <div class="card">
            <h3>Topic 8 Quiz</h3>
            <p>Answer all then click <b>Mark Quiz</b>.</p>
          </div>
          <div class="quizList" id="quizList"></div>
          <div class="controls">
            <button class="miniBtn primary" id="markQuiz">Mark Quiz</button>
            <button class="miniBtn" id="resetQuiz">Reset</button>
          </div>
          <div class="feedback" id="quizFeedback">Start answering the quiz.</div>
        </div>

      </div>
    </section>

    <aside class="panel">
      <div class="panelHead"><div><h2>Progress</h2><small>Saved in your browser</small></div></div>
      <div class="panelBody">
        <div class="card">
          <h3>Total Score</h3>
          <p style="font-size:28px;font-weight:900;margin:6px 0 0" id="score">0</p>
          <p class="pill" id="badge" style="margin-top:8px;">Badge: Starter</p>
        </div>
        <div style="height:10px"></div>
        <div class="card">
          <h3>Quick guide</h3>
          <p>
            • Filtration: insoluble solid + liquid<br/>
            • Magnetism: remove iron filings<br/>
            • Decanting: liquids/solids with different densities<br/>
            • Evaporation: recover dissolved solid (crystals)<br/>
            • Winnowing: wind separates light/heavy solids
          </p>
        </div>
      </div>
    </aside>
  </div>

  <footer>© 2025 LEC Biotec • sales@lecbiotec.com • Harare, Zimbabwe</footer>
</div>

<script>
  const KEY="sciguru_topic8_separation_v1";
  const state = load() || {score:0,_awards:{},tab:"sim",sim:{},quiz:{}};
  function load(){try{return JSON.parse(localStorage.getItem(KEY))}catch(e){return null}}
  function save(){localStorage.setItem(KEY, JSON.stringify(state)); renderScore();}

  const TABS=[{id:"sim",label:"1) Simulator"},{id:"quiz",label:"2) Quiz"}];
  let active=state.tab||"sim";
  const tabsEl=document.getElementById("tabs");
  function renderTabs(){
    tabsEl.innerHTML="";
    TABS.forEach(t=>{
      const b=document.createElement("button");
      b.className="tab"+(t.id===active?" active":"");
      b.type="button"; b.textContent=t.label;
      b.onclick=()=>{active=t.id; state.tab=active; showView(); renderTabs(); save();};
      tabsEl.appendChild(b);
    });
  }
  function showView(){
    document.getElementById("view-sim").style.display = active==="sim"?"":"none";
    document.getElementById("view-quiz").style.display = active==="quiz"?"":"none";
  }

  function addScore(points,key){
    state._awards=state._awards||{};
    if(state._awards[key]) return;
    state._awards[key]=true;
    state.score += points;
  }
  function badgeFromScore(s){ if(s>=60) return "Separation Pro"; if(s>=35) return "Mixer Master"; if(s>=15) return "Improving"; return "Starter"; }
  function renderScore(){
    document.getElementById("score").textContent = state.score||0;
    document.getElementById("badge").textContent = "Badge: " + badgeFromScore(state.score||0);
  }

  const correctMap = {
    sandWater: "filtration",
    ironSulfur: "magnetism",
    oilWater: "decanting",
    saltWater: "evaporation",
    grainChaff: "winnowing"
  };
  const explain = {
    sandWater: "Sand is insoluble in water, so use FILTER PAPER to trap sand and let water pass.",
    ironSulfur: "Iron is magnetic, sulfur is not — a magnet removes iron filings.",
    oilWater: "Oil and water form layers (different densities) — carefully pour off (decant).",
    saltWater: "Salt is dissolved — evaporate the water to recover salt crystals.",
    grainChaff: "Chaff is lighter — wind/air separates light chaff from heavier grain."
  };

  const mixSel=document.getElementById("mixSel");
  const methodSel=document.getElementById("methodSel");
  const simFeedback=document.getElementById("simFeedback");

  document.getElementById("runBtn").onclick=()=>{
    const mix=mixSel.value;
    const method=methodSel.value;
    const correct=correctMap[mix];
    if(method===correct){
      addScore(10, "sim_"+mix);
      simFeedback.textContent = "✅ Correct!\n" + explain[mix] + "\n(+10 points)";
    }else{
      simFeedback.textContent = "❌ Not correct.\nBest method: " + correct.toUpperCase() + "\n" + explain[mix];
    }
    save();
  };
  document.getElementById("resetBtn").onclick=()=>{
    state.sim={};
    simFeedback.textContent="Reset complete. Select a mixture and method, then press Run.";
    save();
  };

  // Quiz
  const QUIZ=[
    {id:"q1", q:"Which method separates sand and water?", opts:["Evaporation","Filtration","Winnowing"], correct:1, exp:"Filtration separates insoluble solid from liquid."},
    {id:"q2", q:"Which method is best for iron filings and sulfur?", opts:["Magnetism","Decanting","Evaporation"], correct:0, exp:"Magnetism removes iron filings."},
    {id:"q3", q:"Which method recovers salt from salt water?", opts:["Evaporation","Filtration","Winnowing"], correct:0, exp:"Evaporation leaves salt crystals."},
    {id:"q4", q:"Decanting works best when substances have different ____.", opts:["densities","colors","smells"], correct:0, exp:"Decanting uses density/layer differences."},
    {id:"q5", q:"Winnowing uses ____ to separate light and heavy solids.", opts:["wind/air","magnet","filter paper"], correct:0, exp:"Winnowing uses wind/air movement."}
  ];
  const quizList=document.getElementById("quizList");
  const quizFeedback=document.getElementById("quizFeedback");

  function renderQuiz(){
    quizList.innerHTML="";
    QUIZ.forEach((x,i)=>{
      const val=state.quiz[x.id];
      const row=document.createElement("div");
      row.className="qItem";
      row.innerHTML=`
        <div style="min-width:0">
          <b>${i+1}. ${x.q}</b><small>Select one answer</small>
        </div>
        <div>
          <select data-q="${x.id}">
            <option value="" ${val==null?"selected":""}>-- choose --</option>
            ${x.opts.map((o,idx)=>`<option value="${idx}" ${String(val)===String(idx)?"selected":""}>${o}</option>`).join("")}
          </select>
        </div>
      `;
      quizList.appendChild(row);
    });
    quizList.querySelectorAll("select[data-q]").forEach(s=>{
      s.onchange=()=>{state.quiz[s.dataset.q]=s.value===""?null:Number(s.value); save();};
    });
  }
  renderQuiz();

  document.getElementById("markQuiz").onclick=()=>{
    let answered=0, correct=0;
    QUIZ.forEach(x=>{
      const a=state.quiz[x.id];
      if(a==null) return;
      answered++; if(a===x.correct) correct++;
    });
    if(answered < QUIZ.length){
      quizFeedback.textContent=`Answered ${answered}/${QUIZ.length}. Finish all then mark.`;
      return;
    }
    const pts=Math.round((correct/QUIZ.length)*30);
    addScore(pts,"topic8Quiz");
    let msg=`Quiz Results:\nCorrect: ${correct}/${QUIZ.length}\nPoints added: ${pts}/30\n\n`;
    QUIZ.forEach((x,i)=>{
      const ok=state.quiz[x.id]===x.correct;
      msg += `${i+1}) ${ok?"✅":"❌"} ${x.exp}\n`;
    });
    quizFeedback.textContent=msg;
    save();
  };
  document.getElementById("resetQuiz").onclick=()=>{
    state.quiz={};
    quizFeedback.textContent="Quiz reset.";
    renderQuiz(); save();
  };

  function init(){ renderTabs(); showView(); renderScore(); save(); }
  init();
</script>
</body>
</html>